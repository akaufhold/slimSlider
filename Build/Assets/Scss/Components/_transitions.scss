/* SLIDER TRANSITION STYLES */

@keyframes circleStroke {
  0% {
    stroke-width: 0;
    opacity: 0;
  }

  25% { opacity: 1; }

  50% {
    stroke-width: var(--stroke-width);
    opacity: 1;
  }

  75% { opacity: 1; }

  100% {
    stroke-width: 0;
    opacity: 0;
  }
}

@keyframes rectStroke {
  0% {
    stroke-width: 0;
    opacity: 0;
  }

  25% {
    opacity: 1;
  }

  50% {
    stroke-width: var(--stroke-width);
    opacity: 1;
  }

  75% {
    opacity: 1;
  }

  100% {
    stroke-width: 0;
    opacity: 0;
  }
}

.slider,
.slider-wrapper {
  > * {
    transition-duration: .7s;
    transition-delay: .2s;
  }

  .slider-image-overlay {
    transition: transform .75s ease-in-out .1s;
  }

  .slider-transition-overlay {
    grid-area: a;
    grid-column-start: 1;
    grid-row-start: 1;
    position: relative;
    z-index: 40;
    pointer-events: none;

    svg {
      @for $i from 1 through 20 {
        > *:nth-child(#{$i}) {
          animation-delay: calc(.05s * #{$i});
        }
      }
    }
  }

  &.fade {
    > * {
      transition-property: opacity;
      opacity: 0;
    }

    .cur-element {
      opacity: 1;
    }
  }

  &.slide {
    transition-property: opacity;

    > * {
      opacity: 1;
    }

    .cur-element {
      opacity: 1;
    }
  }

  &.clip {
    .slider-image-wrapper {
      transition: clip-path 0s .91s, -webkit-clip-path 0s .91s;
      clip-path: circle(0 at 50% 50%);

      &.cur-element {
        transition: clip-path 2s, -webkit-clip-path 2s;
        clip-path: circle(100vmax at 50% 50%);
      }
    }
  }

  &.circle,
  &.rect {
    .slider-image-wrapper {
      .slider-transition-overlay {
        svg {
          width: 100%;
          height: 100%;
          display: block;

          > * {
            stroke: var(--back-color);
            stroke-width: 0;
            opacity: 0;
            fill: none;
            transition-duration: .3s;
          }
        }
      }

      &.cur-element {
        .slider-transition-overlay {
          svg {
            circle {
              animation-name: circleStroke;
              animation-duration: 1s;
              animation-fill-mode: forwards;
              animation-timing-function: linear;
            }

            rect {
              animation-name: rectStroke;
              animation-duration: 1.2s;
              animation-fill-mode: forwards;
              animation-timing-function: linear;
            }
          }
        }
      }
    }
  }

  &.rect {
    .overlay-style-circle {
      &.slider-image-overlay {
        transition-delay: .7s;
      }
    }

    .slider-transition-overlay {
      transform: scale(1.2);
    }
  }

  &.blur {
    transition-property: filter;

    > * {
      filter: blur(50px);
      transform: scale(1.1);
    }

    .cur-element {
      filter: blur(0);
      transform: scale(1);
    }
  }

  &.slices {
    .slider-image {
      opacity: 0;
    }

    .slider-image-overlay {
      transition-delay: 1s;
      z-index: 10;
      opacity: 0;
    }

    .slider-transition-overlay {
      display: flex;
      flex-direction: row;

      .slider-transition-clone {
        height: 100%;
        position: relative;
        overflow: hidden;

        .slider-transition-clone-img {
          position: absolute;
          left: 0;
          top: 0;
          object-fit: cover;
          object-position: center;
          transition-timing-function: ease-out;
          max-width: unset;
        }
      }
    }

    .cur-element {
      .slider-image {
        opacity: 1;
        transition-delay: var(--transition-delay);
      }

      .slider-image-overlay {
        z-index: 51;
        opacity: 1;
      }

      .slider-transition-overlay {
        .slider-transition-clone {
          .slider-transition-clone-img {
            transform: translateY(0%);
          }
        }
      }
    }
  }

  &.tiles {
    .slider-image {
      display: none;
    }

    .slider-image-overlay {
      transition-delay: 1s;
      z-index: 10;
      opacity: 0;
    }

    .slider-transition-overlay {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;

      .slider-transition-clone {
        opacity: 0;
        height: 100%;
        position: relative;
        overflow: hidden;
        border-radius: 20px;
        filter: saturate(0);

        .slider-transition-clone-img {
          position: absolute;
          left: 0;
          top: 0;
          object-fit: cover;
          object-position: center;
          transition-timing-function: ease-out;
          max-width: unset;
        }
      }
    }

    .prev-element {
      .slider-image {
        display: block;
      }

      .slider-transition-overlay {
        .slider-transition-clone {
          transform: translate3d(0, 0, 0) !important;
          transition-duration: 0 !important;
        }
      }
    }

    .cur-element {
      .slider-image {
        display: none;
        transition-delay: var(--transition-delay);
      }

      .slider-image-overlay {
        z-index: 51;
        opacity: 1;
      }

      .slider-transition-overlay {
        .slider-transition-clone {
          border-radius: 0;
          opacity: 1;
          transition-delay: .5s;
          transform: rotateX(0) translate3d(0, 0, 0) !important;
          filter: saturate(1);

          .slider-transition-clone-img {
            transform: translateY(0%);
          }
        }
      }
    }
  }

  /* SLIDER OVERLAY STYLES */
  .overlay-style-circle {
    &.slider-image-overlay {
      transition-delay: .5s;
      transform: scale(0);
    }
  }

  .cur-element {
    .overlay-style-circle {
      &.slider-image-overlay {
        transform: scale(1);
      }
    }
  }
}
